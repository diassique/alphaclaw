<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AlphaClaw â€” AI Alpha Marketplace</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #050508;
      --bg2: #0c0c12;
      --bg3: #13131d;
      --border: #1e1e2e;
      --border2: #2a2a3e;
      --accent: #7c3aed;
      --accent2: #a855f7;
      --accent3: #06b6d4;
      --green: #10b981;
      --yellow: #f59e0b;
      --red: #ef4444;
      --text: #e2e8f0;
      --text2: #94a3b8;
      --text3: #475569;
      --mono: 'Space Mono', monospace;
      --sans: 'Space Grotesk', sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--sans);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Animated grid background */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(124,58,237,.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(124,58,237,.03) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: 0;
    }

    /* Glow orbs */
    .orb {
      position: fixed;
      border-radius: 50%;
      filter: blur(120px);
      pointer-events: none;
      z-index: 0;
      opacity: .15;
    }
    .orb1 { width: 600px; height: 600px; background: var(--accent); top: -200px; left: -200px; }
    .orb2 { width: 400px; height: 400px; background: var(--accent3); bottom: -100px; right: -100px; }

    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(5,5,8,.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 0 2rem;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: .75rem;
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: -.02em;
    }
    .logo-icon {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--accent), var(--accent3));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
    }
    .logo-sub { color: var(--text2); font-size: .75rem; font-weight: 400; font-family: var(--mono); }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: .4rem;
      padding: .3rem .75rem;
      border-radius: 100px;
      font-size: .75rem;
      font-family: var(--mono);
      font-weight: 700;
    }
    .badge-green { background: rgba(16,185,129,.1); border: 1px solid rgba(16,185,129,.3); color: var(--green); }
    .badge-yellow { background: rgba(245,158,11,.1); border: 1px solid rgba(245,158,11,.3); color: var(--yellow); }
    .badge-red { background: rgba(239,68,68,.1); border: 1px solid rgba(239,68,68,.3); color: var(--red); }
    .badge-purple { background: rgba(124,58,237,.15); border: 1px solid rgba(124,58,237,.3); color: var(--accent2); }
    .dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:.4;} }

    /* â”€â”€â”€ Status Strip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .status-strip {
      background: var(--bg2);
      border-bottom: 1px solid var(--border);
      padding: .5rem 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      font-size: .75rem;
      font-family: var(--mono);
      color: var(--text2);
      z-index: 99;
      position: sticky;
      top: 64px;
      flex-wrap: wrap;
    }
    .status-strip-left {
      display: flex;
      align-items: center;
      gap: .5rem;
    }
    .status-indicator {
      width: 8px; height: 8px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .status-indicator.ok { background: var(--green); box-shadow: 0 0 8px var(--green); animation: pulse 2s infinite; }
    .status-indicator.degraded { background: var(--yellow); box-shadow: 0 0 8px var(--yellow); animation: pulse 1s infinite; }
    .status-indicator.offline { background: var(--red); box-shadow: 0 0 8px var(--red); }
    .status-indicator.loading { background: var(--text3); animation: pulse 1s infinite; }
    .status-label { font-weight: 700; }
    .status-label.ok { color: var(--green); }
    .status-label.degraded { color: var(--yellow); }
    .status-label.offline { color: var(--red); }
    .status-label.loading { color: var(--text3); }
    .status-dots {
      display: flex;
      align-items: center;
      gap: .35rem;
    }
    .status-dot {
      width: 18px; height: 18px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .55rem;
      font-weight: 700;
      cursor: default;
      transition: all .2s;
      position: relative;
    }
    .status-dot.ok { background: rgba(16,185,129,.15); border: 1px solid rgba(16,185,129,.3); color: var(--green); }
    .status-dot.error, .status-dot.offline { background: rgba(239,68,68,.15); border: 1px solid rgba(239,68,68,.3); color: var(--red); }
    .status-dot.unknown { background: rgba(71,85,105,.15); border: 1px solid rgba(71,85,105,.3); color: var(--text3); }
    .status-dot:hover { transform: scale(1.2); }
    .status-dot .tooltip {
      display: none;
      position: absolute;
      bottom: calc(100% + 6px);
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg);
      border: 1px solid var(--border2);
      border-radius: 8px;
      padding: .5rem .75rem;
      font-size: .7rem;
      white-space: nowrap;
      z-index: 10;
      color: var(--text);
      font-weight: 400;
      box-shadow: 0 4px 12px rgba(0,0,0,.4);
    }
    .status-dot:hover .tooltip { display: block; }
    .status-meta {
      font-size: .7rem;
      color: var(--text3);
    }
    .status-countdown {
      width: 16px; height: 16px;
      border-radius: 50%;
      border: 2px solid var(--border2);
      border-top-color: var(--accent);
      display: inline-block;
      vertical-align: middle;
      animation: spin 10s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    main {
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 4rem 0 3rem;
    }
    .hero-label {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      background: rgba(124,58,237,.1);
      border: 1px solid rgba(124,58,237,.2);
      border-radius: 100px;
      padding: .4rem 1rem;
      font-size: .75rem;
      font-family: var(--mono);
      color: var(--accent2);
      margin-bottom: 1.5rem;
    }
    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      font-weight: 700;
      letter-spacing: -.04em;
      line-height: 1.05;
      margin-bottom: 1.25rem;
    }
    .hero h1 span {
      background: linear-gradient(135deg, var(--accent2), var(--accent3));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .hero p {
      font-size: 1.15rem;
      color: var(--text2);
      max-width: 560px;
      margin: 0 auto 2.5rem;
      line-height: 1.6;
    }

    .hero-actions {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .75rem 1.5rem;
      border-radius: 10px;
      font-family: var(--sans);
      font-size: .9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all .2s;
      border: none;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #6d28d9);
      color: #fff;
      box-shadow: 0 0 30px rgba(124,58,237,.4);
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 40px rgba(124,58,237,.6); }
    .btn-secondary {
      background: var(--bg3);
      color: var(--text);
      border: 1px solid var(--border2);
    }
    .btn-secondary:hover { border-color: var(--accent); color: var(--accent2); }

    /* Stats bar */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 3rem;
    }
    .stat {
      background: var(--bg2);
      padding: 1.25rem 1.5rem;
      text-align: center;
    }
    .stat-val {
      font-size: 1.6rem;
      font-weight: 700;
      font-family: var(--mono);
      background: linear-gradient(135deg, var(--accent2), var(--accent3));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .stat-label { font-size: .75rem; color: var(--text3); margin-top: .25rem; text-transform: uppercase; letter-spacing: .05em; }

    /* Hunt form */
    .hunt-section {
      margin-bottom: 3rem;
    }
    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: .5rem;
      color: var(--text2);
    }
    .section-title::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--border);
    }

    .hunt-box {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 1.5rem;
    }
    .hunt-input-row {
      display: flex;
      gap: .75rem;
    }
    .hunt-input {
      flex: 1;
      background: var(--bg3);
      border: 1px solid var(--border2);
      border-radius: 10px;
      padding: .75rem 1rem;
      font-family: var(--sans);
      font-size: .95rem;
      color: var(--text);
      outline: none;
      transition: border-color .2s;
    }
    .hunt-input:focus { border-color: var(--accent); }
    .hunt-input::placeholder { color: var(--text3); }

    .quick-topics {
      display: flex;
      gap: .5rem;
      flex-wrap: wrap;
      margin-top: .75rem;
    }
    .topic-chip {
      background: var(--bg3);
      border: 1px solid var(--border2);
      border-radius: 100px;
      padding: .3rem .75rem;
      font-size: .75rem;
      color: var(--text2);
      cursor: pointer;
      transition: all .15s;
      font-family: var(--mono);
    }
    .topic-chip:hover { border-color: var(--accent); color: var(--accent2); background: rgba(124,58,237,.05); }

    /* Stream output */
    #stream-output {
      margin-top: 1rem;
      display: none;
    }
    .stream-log {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      font-family: var(--mono);
      font-size: .78rem;
      max-height: 300px;
      overflow-y: auto;
    }
    .stream-log::-webkit-scrollbar { width: 4px; }
    .stream-log::-webkit-scrollbar-track { background: transparent; }
    .stream-log::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

    .log-line {
      padding: .2rem 0;
      display: flex;
      align-items: flex-start;
      gap: .75rem;
      border-bottom: 1px solid rgba(30,30,46,.5);
    }
    .log-line:last-child { border-bottom: none; }
    .log-time { color: var(--text3); white-space: nowrap; flex-shrink: 0; }
    .log-pay  { color: var(--yellow); }
    .log-ok   { color: var(--green); }
    .log-alpha{ color: var(--accent2); }
    .log-err  { color: var(--red); }

    /* Alpha result card */
    .alpha-result {
      background: var(--bg3);
      border: 1px solid var(--border2);
      border-radius: 12px;
      padding: 1.25rem;
      margin-top: 1rem;
      display: none;
    }
    .alpha-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    .alpha-rec {
      font-size: 1rem;
      font-weight: 600;
    }
    .alpha-conf {
      font-family: var(--mono);
      font-size: .85rem;
      color: var(--text2);
    }
    .alpha-signals {
      display: flex;
      gap: .4rem;
      flex-wrap: wrap;
    }
    .signal-tag {
      background: rgba(124,58,237,.1);
      border: 1px solid rgba(124,58,237,.2);
      border-radius: 6px;
      padding: .2rem .5rem;
      font-family: var(--mono);
      font-size: .7rem;
      color: var(--accent2);
    }

    /* Reports grid */
    .reports-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
      gap: 1rem;
      margin-bottom: 3rem;
    }

    .report-card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 1.5rem;
      cursor: pointer;
      transition: all .2s;
      position: relative;
      overflow: hidden;
    }
    .report-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(124,58,237,.05), transparent);
      opacity: 0;
      transition: opacity .2s;
    }
    .report-card:hover { border-color: var(--accent); transform: translateY(-2px); }
    .report-card:hover::before { opacity: 1; }

    .report-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: .75rem;
    }
    .report-id {
      font-family: var(--mono);
      font-size: .7rem;
      color: var(--text3);
    }
    .report-price {
      font-family: var(--mono);
      font-size: .75rem;
      color: var(--green);
      background: rgba(16,185,129,.08);
      border: 1px solid rgba(16,185,129,.2);
      border-radius: 6px;
      padding: .2rem .5rem;
    }
    .report-topic {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: .5rem;
      color: var(--text);
    }
    .report-preview {
      font-size: .82rem;
      color: var(--text2);
      line-height: 1.5;
      margin-bottom: 1rem;
    }
    .report-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .report-time { font-size: .72rem; color: var(--text3); font-family: var(--mono); }

    /* Services status */
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: .75rem;
      margin-bottom: 3rem;
    }
    .service-card {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.15rem;
      display: flex;
      align-items: flex-start;
      gap: .75rem;
      transition: all .2s;
    }
    .service-card:hover { border-color: var(--border2); }
    .service-card.svc-ok { border-left: 3px solid var(--green); }
    .service-card.svc-err { border-left: 3px solid var(--red); }
    .service-card.svc-off { border-left: 3px solid var(--text3); }
    .service-status { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; margin-top: 5px; }
    .status-ok { background: var(--green); box-shadow: 0 0 8px var(--green); }
    .status-err { background: var(--red); box-shadow: 0 0 8px var(--red); }
    .status-off { background: var(--text3); }
    .service-info { flex: 1; min-width: 0; }
    .service-name { font-size: .82rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .service-details {
      display: flex;
      align-items: center;
      gap: .75rem;
      margin-top: .3rem;
    }
    .service-price { font-size: .7rem; color: var(--text3); font-family: var(--mono); }
    .service-latency {
      font-size: .65rem;
      font-family: var(--mono);
      color: var(--text3);
      background: var(--bg3);
      border-radius: 4px;
      padding: .1rem .35rem;
    }
    .service-latency.fast { color: var(--green); }
    .service-latency.medium { color: var(--yellow); }
    .service-latency.slow { color: var(--red); }
    .service-port {
      font-size: .65rem;
      font-family: var(--mono);
      color: var(--text3);
    }

    /* Tx feed */
    .tx-feed {
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 3rem;
    }
    .tx-header {
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .tx-title { font-weight: 600; font-size: .9rem; }
    .tx-item {
      padding: .85rem 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 1rem;
      font-family: var(--mono);
      font-size: .75rem;
      transition: background .15s;
    }
    .tx-item:last-child { border-bottom: none; }
    .tx-item:hover { background: var(--bg3); }
    .tx-dir { color: var(--text3); }
    .tx-amount { color: var(--green); font-weight: 700; margin-left: auto; }
    .tx-hash { color: var(--text3); }
    .tx-addr { color: var(--accent2); }
    .tx-empty {
      padding: 2rem;
      text-align: center;
      color: var(--text3);
      font-size: .85rem;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.8);
      backdrop-filter: blur(8px);
      z-index: 200;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .modal-overlay.open { display: flex; }
    .modal {
      background: var(--bg2);
      border: 1px solid var(--border2);
      border-radius: 20px;
      width: 100%;
      max-width: 640px;
      max-height: 85vh;
      overflow-y: auto;
      padding: 2rem;
    }
    .modal h2 { font-size: 1.3rem; font-weight: 700; margin-bottom: 1.5rem; }
    .modal-close {
      float: right;
      background: var(--bg3);
      border: 1px solid var(--border2);
      border-radius: 8px;
      color: var(--text2);
      padding: .4rem .75rem;
      cursor: pointer;
      font-family: var(--sans);
      font-size: .85rem;
      transition: all .15s;
    }
    .modal-close:hover { color: var(--text); border-color: var(--text2); }

    .report-detail-section { margin-bottom: 1.5rem; }
    .report-detail-label {
      font-size: .72rem;
      color: var(--text3);
      text-transform: uppercase;
      letter-spacing: .08em;
      margin-bottom: .5rem;
    }
    .breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: .6rem 0;
      border-bottom: 1px solid var(--border);
      font-size: .83rem;
    }
    .breakdown-item:last-child { border-bottom: none; }
    .breakdown-key { color: var(--text2); }
    .breakdown-val { color: var(--text); font-family: var(--mono); font-size: .78rem; max-width: 55%; text-align: right; }

    .buy-cta {
      background: linear-gradient(135deg, var(--bg3), var(--bg));
      border: 1px solid var(--border2);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      margin-top: 1rem;
    }
    .buy-cta p { color: var(--text2); font-size: .85rem; margin-bottom: 1rem; }

    footer {
      position: relative;
      z-index: 1;
      border-top: 1px solid var(--border);
      padding: 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: gap;
      color: var(--text3);
      font-size: .78rem;
      font-family: var(--mono);
    }

    @media (max-width: 600px) {
      main { padding: 1rem; }
      .hero { padding: 2rem 0; }
      .hero h1 { font-size: 2rem; }
      .hunt-input-row { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="orb orb1"></div>
  <div class="orb orb2"></div>

  <nav>
    <div class="logo">
      <div class="logo-icon">ğŸ¾</div>
      <div>
        AlphaClaw
        <div class="logo-sub">AI Alpha Marketplace</div>
      </div>
    </div>
    <div class="nav-right">
      <span class="badge badge-green"><span class="dot"></span> LIVE</span>
      <span class="badge badge-purple">Base Sepolia Â· x402</span>
    </div>
  </nav>

  <!-- Real-time Status Strip -->
  <div class="status-strip" id="status-strip">
    <div class="status-strip-left">
      <div class="status-indicator loading" id="strip-indicator"></div>
      <span class="status-label loading" id="strip-label">Checking...</span>
    </div>
    <div class="status-dots" id="strip-dots">
      <!-- populated by JS -->
    </div>
    <div class="status-meta">
      <span id="strip-latency">--</span>
      &middot;
      <span id="strip-checked">checking</span>
      &middot;
      <span class="status-countdown" id="strip-countdown"></span>
    </div>
  </div>

  <main>
    <!-- Hero -->
    <div class="hero">
      <div class="hero-label">âš¡ SURGE Ã— OpenClaw Hackathon 2026</div>
      <h1>The <span>Alpha Marketplace</span><br/>for AI Agents</h1>
      <p>5 autonomous agents buy and sell intelligence via x402 micropayments. One query. Five data sources. Real on-chain transactions.</p>
      <div class="hero-actions">
        <button class="btn btn-primary" onclick="scrollToHunt()">ğŸ” Hunt Alpha</button>
        <button class="btn btn-secondary" onclick="document.getElementById('services-section').scrollIntoView({behavior:'smooth'})">ğŸ“Š Network Status</button>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats" id="stats">
      <div class="stat">
        <div class="stat-val" id="stat-services">6</div>
        <div class="stat-label">Active Agents</div>
      </div>
      <div class="stat">
        <div class="stat-val" id="stat-reports">â€”</div>
        <div class="stat-label">Cached Reports</div>
      </div>
      <div class="stat">
        <div class="stat-val">$0.039</div>
        <div class="stat-label">Buy Cost</div>
      </div>
      <div class="stat">
        <div class="stat-val">$0.050</div>
        <div class="stat-label">Sell Price</div>
      </div>
      <div class="stat">
        <div class="stat-val" style="color: var(--green);">$0.011</div>
        <div class="stat-label">Margin / Hunt</div>
      </div>
    </div>

    <!-- Hunt -->
    <div class="hunt-section" id="hunt">
      <div class="section-title">ğŸ” Run a Hunt</div>
      <div class="hunt-box">
        <div class="hunt-input-row">
          <input class="hunt-input" id="hunt-topic" type="text"
            placeholder="e.g. Trump impeachment 2026, Fed rate cut, Bitcoin ETF..." />
          <button class="btn btn-primary" id="hunt-btn" onclick="runHunt()">Hunt â†’</button>
        </div>
        <div class="quick-topics">
          <span class="topic-chip" onclick="setTopic(this)">Trump impeachment</span>
          <span class="topic-chip" onclick="setTopic(this)">Fed rate cut March</span>
          <span class="topic-chip" onclick="setTopic(this)">Bitcoin ETF approval</span>
          <span class="topic-chip" onclick="setTopic(this)">Ethereum DeFi</span>
          <span class="topic-chip" onclick="setTopic(this)">Base L2 yields</span>
        </div>

        <div id="stream-output">
          <div class="stream-log" id="stream-log"></div>
          <div class="alpha-result" id="alpha-result">
            <div class="alpha-header">
              <div class="alpha-rec" id="alpha-rec"></div>
              <div class="alpha-conf" id="alpha-conf"></div>
            </div>
            <div class="alpha-signals" id="alpha-signals"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Services -->
    <div class="section-title" id="services-section">âš™ï¸ Network Services</div>
    <div class="services-grid" id="services-grid">
      <div class="service-card">
        <div class="service-status status-off"></div>
        <div class="service-info">
          <div class="service-name">Loading...</div>
          <div class="service-price">checking</div>
        </div>
      </div>
    </div>

    <!-- Reports -->
    <div class="section-title">ğŸ“¦ Available Reports</div>
    <div id="reports-container">
      <div class="reports-grid" id="reports-grid">
        <div style="color: var(--text3); font-size:.85rem; grid-column:1/-1; padding:2rem; text-align:center;">
          No reports yet â€” run a hunt to generate one
        </div>
      </div>
    </div>

    <!-- Tx Feed -->
    <div class="section-title">âš¡ Recent Transactions</div>
    <div class="tx-feed">
      <div class="tx-header">
        <span class="tx-title">x402 Payment Stream</span>
        <span class="badge badge-green" style="font-size:.7rem;"><span class="dot"></span> Base Sepolia</span>
      </div>
      <div id="tx-list">
        <div class="tx-empty">Transactions will appear here after a hunt</div>
      </div>
    </div>
  </main>

  <!-- Report Modal -->
  <div class="modal-overlay" id="modal" onclick="closeModal(event)">
    <div class="modal" id="modal-content">
      <button class="modal-close" onclick="closeModal()">âœ• Close</button>
      <h2 id="modal-title">Alpha Report</h2>
      <div id="modal-body"></div>
    </div>
  </div>

  <footer>
    <span>ğŸ¾ AlphaClaw Network Â· Base Sepolia Â· x402</span>
    <span>SURGE Ã— OpenClaw Hackathon 2026</span>
  </footer>

  <script>
    const API = '';
    let txLog = [];

    // â”€â”€â”€ Utils â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function timeAgo(iso) {
      const d = Math.floor((Date.now() - new Date(iso)) / 1000);
      if (d < 60) return `${d}s ago`;
      if (d < 3600) return `${Math.floor(d/60)}m ago`;
      return `${Math.floor(d/3600)}h ago`;
    }

    function shortAddr(addr) {
      return addr ? addr.slice(0,6) + 'â€¦' + addr.slice(-4) : 'â€”';
    }

    function shortHash(h) {
      return h ? h.slice(0,10) + 'â€¦' : 'â€”';
    }

    function setTopic(el) {
      document.getElementById('hunt-topic').value = el.textContent;
    }

    function scrollToHunt() {
      document.getElementById('hunt').scrollIntoView({ behavior: 'smooth' });
      setTimeout(() => document.getElementById('hunt-topic').focus(), 400);
    }

    // â”€â”€â”€ Load services status + status strip â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    const POLL_INTERVAL = 10_000;
    let lastHealthData = null;

    function latencyClass(ms) {
      if (ms < 100) return 'fast';
      if (ms < 500) return 'medium';
      return 'slow';
    }

    function statusIcon(status) {
      return status === 'ok' ? '&#10003;' : '&#10007;';
    }

    function updateStatusStrip(data) {
      const indicator = document.getElementById('strip-indicator');
      const label = document.getElementById('strip-label');
      const dots = document.getElementById('strip-dots');
      const latency = document.getElementById('strip-latency');
      const checked = document.getElementById('strip-checked');

      // Overall status
      const cls = data.ok ? 'ok' : data.onlineCount > 0 ? 'degraded' : 'offline';
      const labelText = data.ok ? 'ALL OPERATIONAL' : data.onlineCount > 0 ? `DEGRADED (${data.onlineCount}/${data.totalCount})` : 'OFFLINE';

      indicator.className = `status-indicator ${cls}`;
      label.className = `status-label ${cls}`;
      label.textContent = labelText;
      latency.textContent = `avg ${data.avgLatencyMs}ms`;
      checked.textContent = `updated ${new Date(data.checkedAt).toLocaleTimeString('en', {hour12: false})}`;

      // Service dots
      dots.innerHTML = data.services.map(s => {
        const dotCls = s.status === 'ok' ? 'ok' : s.status === 'error' ? 'error' : 'offline';
        const name = s.name.replace('alphaclaw-', '').replace('-alpha-scanner', '');
        return `
          <div class="status-dot ${dotCls}" title="${s.name}">
            <span>${statusIcon(s.status)}</span>
            <div class="tooltip">
              <strong>${s.name}</strong><br/>
              Port ${s.port} &middot; ${s.latencyMs}ms<br/>
              ${s.price ? s.price + ' USDC' : 'coordinator'}<br/>
              Status: <span style="color:var(${s.status === 'ok' ? '--green' : '--red'})">${s.status.toUpperCase()}</span>
            </div>
          </div>`;
      }).join('');
    }

    function updateServicesGrid(data) {
      const grid = document.getElementById('services-grid');
      grid.innerHTML = data.services.map(s => {
        const statusCls = s.status === 'ok' ? 'ok' : s.status === 'error' ? 'err' : 'off';
        const latCls = latencyClass(s.latencyMs);
        const name = s.name.replace('alphaclaw-', '');
        return `
          <div class="service-card svc-${statusCls}">
            <div class="service-status status-${statusCls}"></div>
            <div class="service-info">
              <div class="service-name">${name}</div>
              <div class="service-details">
                <span class="service-price">${s.price || 'coordinator'}</span>
                <span class="service-latency ${latCls}">${s.latencyMs}ms</span>
                <span class="service-port">:${s.port}</span>
              </div>
            </div>
          </div>`;
      }).join('');
    }

    async function loadServices() {
      try {
        const r = await fetch('/health-all');
        const d = await r.json();
        lastHealthData = d;

        updateStatusStrip(d);
        updateServicesGrid(d);

        document.getElementById('stat-services').textContent = d.onlineCount;

        // Update nav badge
        const navBadge = document.querySelector('.nav-right .badge-green');
        if (navBadge) {
          if (d.ok) {
            navBadge.className = 'badge badge-green';
            navBadge.innerHTML = '<span class="dot"></span> LIVE';
          } else if (d.onlineCount > 0) {
            navBadge.className = 'badge badge-yellow';
            navBadge.innerHTML = '<span class="dot"></span> DEGRADED';
          } else {
            navBadge.className = 'badge badge-red';
            navBadge.innerHTML = '<span class="dot"></span> OFFLINE';
          }
        }
      } catch(e) {
        // Total failure â€” can't reach coordinator
        const indicator = document.getElementById('strip-indicator');
        const label = document.getElementById('strip-label');
        indicator.className = 'status-indicator offline';
        label.className = 'status-label offline';
        label.textContent = 'UNREACHABLE';
        document.getElementById('strip-dots').innerHTML = '';
        document.getElementById('strip-latency').textContent = '--';
        document.getElementById('strip-checked').textContent = 'failed';

        document.getElementById('services-grid').innerHTML =
          '<div style="color:var(--red);font-size:.8rem;padding:1rem;text-align:center;grid-column:1/-1">Failed to reach coordinator</div>';
      }
    }

    // â”€â”€â”€ Load reports â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    async function loadReports() {
      try {
        const r = await fetch('/reports');
        const d = await r.json();
        document.getElementById('stat-reports').textContent = d.count;
        const grid = document.getElementById('reports-grid');
        if (!d.reports.length) {
          grid.innerHTML = '<div style="color:var(--text3);font-size:.85rem;grid-column:1/-1;padding:2rem;text-align:center;">No reports yet â€” run a hunt to generate one</div>';
          return;
        }
        grid.innerHTML = d.reports.map(rep => `
          <div class="report-card" onclick="openReport('${rep.id}')">
            <div class="report-meta">
              <span class="report-id">#${rep.id}</span>
              <span class="report-price">${rep.price}</span>
            </div>
            <div class="report-topic">${rep.topic}</div>
            <div class="report-preview">${rep.preview}</div>
            <div class="report-footer">
              <span class="report-time">${timeAgo(rep.timestamp)}</span>
              <span class="badge badge-purple" style="font-size:.68rem;">Buy via x402</span>
            </div>
          </div>
        `).join('');
      } catch(e) {}
    }

    // â”€â”€â”€ Hunt (SSE stream) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function addLog(cls, icon, msg) {
      const log = document.getElementById('stream-log');
      const time = new Date().toLocaleTimeString('en', {hour12:false});
      const line = document.createElement('div');
      line.className = `log-line log-${cls}`;
      line.innerHTML = `<span class="log-time">${time}</span><span>${icon} ${msg}</span>`;
      log.appendChild(line);
      log.scrollTop = log.scrollHeight;
    }

    function runHunt() {
      const topic = document.getElementById('hunt-topic').value.trim();
      if (!topic) { document.getElementById('hunt-topic').focus(); return; }

      const btn = document.getElementById('hunt-btn');
      btn.disabled = true;
      btn.textContent = 'Huntingâ€¦';

      const output = document.getElementById('stream-output');
      const log = document.getElementById('stream-log');
      const result = document.getElementById('alpha-result');
      output.style.display = 'block';
      result.style.display = 'none';
      log.innerHTML = '';

      addLog('ok', 'ğŸš€', `Starting hunt: "${topic}"`);

      const sse = new EventSource(`/stream?topic=${encodeURIComponent(topic)}`);

      sse.addEventListener('start', e => {
        const d = JSON.parse(e.data);
        addLog('ok', 'âš¡', `Coordinator online Â· ${d.services} agents ready`);
      });

      sse.addEventListener('paying', e => {
        const d = JSON.parse(e.data);
        addLog('pay', 'ğŸ’³', `Paying ${d.service} â€¦ ${d.amount} USDC`);
      });

      sse.addEventListener('result', e => {
        const d = JSON.parse(e.data);
        const tx = d.txHash ? ` Â· tx: ${shortHash(d.txHash)}` : (d.paid ? '' : ' (demo)');
        addLog('ok', 'âœ…', `${d.service} responded${tx}`);
        if (d.paid && d.txHash) {
          addTx({ service: d.service, txHash: d.txHash, paid: true });
        }
      });

      sse.addEventListener('alpha', e => {
        const d = JSON.parse(e.data);
        addLog('alpha', 'ğŸ¯', `Alpha synthesis complete Â· ${d.confidence} confidence`);
        showAlpha(d);
      });

      sse.addEventListener('cached', e => {
        const d = JSON.parse(e.data);
        addLog('ok', 'ğŸ“¦', `Report cached: ${d.reportId} Â· available at ${d.url} for ${d.sellPrice}`);
        setTimeout(loadReports, 500);
      });

      sse.addEventListener('error', e => {
        try { const d = JSON.parse(e.data); addLog('err', 'âŒ', d.message); } catch {}
      });

      sse.addEventListener('done', () => {
        sse.close();
        btn.disabled = false;
        btn.textContent = 'Hunt â†’';
        addLog('ok', 'ğŸ', 'Hunt complete');
      });

      sse.onerror = () => {
        sse.close();
        btn.disabled = false;
        btn.textContent = 'Hunt â†’';
      };
    }

    function showAlpha(d) {
      const result = document.getElementById('alpha-result');
      const rec = document.getElementById('alpha-rec');
      const conf = document.getElementById('alpha-conf');
      const signals = document.getElementById('alpha-signals');

      rec.textContent = d.recommendation;
      conf.textContent = `Confidence: ${d.confidence}`;

      const colors = {
        'strongly_bullish': '#10b981',
        'bullish': '#34d399',
        'HIGH_ALPHA': '#a855f7',
        'MEDIUM_ALPHA': '#f59e0b',
        'ACCUMULATION': '#06b6d4',
      };

      signals.innerHTML = (d.signals || []).map(s => {
        const col = Object.entries(colors).find(([k]) => s.includes(k));
        return `<span class="signal-tag" style="${col ? `border-color:${col[1]}40;color:${col[1]}` : ''}">${s}</span>`;
      }).join('');

      result.style.display = 'block';
    }

    // â”€â”€â”€ Tx log â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function addTx(tx) {
      txLog.unshift(tx);
      if (txLog.length > 10) txLog.pop();
      renderTxList();
    }

    function renderTxList() {
      const list = document.getElementById('tx-list');
      if (!txLog.length) {
        list.innerHTML = '<div class="tx-empty">Transactions will appear here after a hunt</div>';
        return;
      }
      list.innerHTML = txLog.map(tx => `
        <div class="tx-item">
          <span class="tx-dir">OUT</span>
          <span class="tx-addr">${tx.service}</span>
          <span class="tx-hash">${shortHash(tx.txHash)}</span>
          <span class="tx-amount">USDC</span>
        </div>
      `).join('');
    }

    // â”€â”€â”€ Report modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    async function openReport(id) {
      document.getElementById('modal').classList.add('open');
      const body = document.getElementById('modal-body');
      body.innerHTML = '<div style="color:var(--text3);padding:2rem;text-align:center;">Loadingâ€¦</div>';

      try {
        const r = await fetch(`/report/${id}`);
        const d = await r.json();

        if (r.status === 402) {
          document.getElementById('modal-title').textContent = 'ğŸ”’ Locked Report';
          body.innerHTML = `
            <div class="buy-cta">
              <p>This report requires a payment of <strong>$0.01 USDC</strong> via x402 to unlock.</p>
              <p style="font-size:.75rem;color:var(--text3);margin-bottom:1rem;font-family:var(--mono);">Report ID: ${id}</p>
              <button class="btn btn-primary" onclick="copyEndpoint('${id}')">ğŸ“‹ Copy x402 Endpoint</button>
            </div>`;
          return;
        }

        document.getElementById('modal-title').textContent = `ğŸ“Š ${d.topic}`;
        const a = d.alpha || {};
        const b = a.breakdown || {};

        body.innerHTML = `
          <div class="report-detail-section">
            <div class="report-detail-label">Synthesis</div>
            <div style="font-size:1rem;font-weight:600;margin-bottom:.5rem">${a.recommendation || 'â€”'}</div>
            <div style="font-size:.85rem;color:var(--text2)">Confidence: <strong style="color:var(--accent2)">${a.confidence || 'â€”'}</strong></div>
          </div>

          <div class="report-detail-section">
            <div class="report-detail-label">Signals</div>
            <div class="alpha-signals" style="margin-top:.25rem">
              ${(a.signals||[]).map(s=>`<span class="signal-tag">${s}</span>`).join('')||'<span style="color:var(--text3)">No signals</span>'}
            </div>
          </div>

          ${b.news ? `
          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ“° News</div>
            <div class="breakdown-item"><span class="breakdown-key">Top headline</span><span class="breakdown-val">${b.news.topHeadline}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Articles found</span><span class="breakdown-val">${b.news.articleCount}</span></div>
          </div>` : ''}

          ${b.sentiment ? `
          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ’¬ Sentiment</div>
            <div class="breakdown-item"><span class="breakdown-key">Label</span><span class="breakdown-val">${b.sentiment.label}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Score</span><span class="breakdown-val">${b.sentiment.score}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Confidence</span><span class="breakdown-val">${b.sentiment.confidence}</span></div>
          </div>` : ''}

          ${b.polymarket ? `
          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ² Polymarket</div>
            <div class="breakdown-item"><span class="breakdown-key">Market</span><span class="breakdown-val">${b.polymarket.market}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Signal</span><span class="breakdown-val">${b.polymarket.signal}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">YES price</span><span class="breakdown-val">${b.polymarket.yesPrice}</span></div>
          </div>` : ''}

          ${b.whale ? `
          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ³ Whale Activity</div>
            <div class="breakdown-item"><span class="breakdown-key">Signal</span><span class="breakdown-val">${b.whale.signal}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Whale count</span><span class="breakdown-val">${b.whale.whaleCount}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Total volume</span><span class="breakdown-val">${b.whale.totalVolume}</span></div>
          </div>` : ''}

          ${b.defi ? `
          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ¦ DeFi</div>
            <div class="breakdown-item"><span class="breakdown-key">Asset</span><span class="breakdown-val">${b.defi.asset}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">Action</span><span class="breakdown-val">${b.defi.action}</span></div>
            <div class="breakdown-item"><span class="breakdown-key">24h change</span><span class="breakdown-val">${b.defi.change24h}</span></div>
          </div>` : ''}

          <div class="report-detail-section">
            <div class="report-detail-label">ğŸ’¸ Agent Payments</div>
            ${(d.agentPayments?.breakdown||[]).map(p=>`
              <div class="breakdown-item">
                <span class="breakdown-key">${p.service}</span>
                <span class="breakdown-val" style="color:${p.paid?'var(--green)':'var(--text3)'}">
                  ${p.paid?'âœ…':'âš ï¸'} ${p.price}${p.txHash?` Â· ${shortHash(p.txHash)}`:''}
                </span>
              </div>
            `).join('')}
          </div>

          <div style="font-size:.72rem;color:var(--text3);font-family:var(--mono);padding-top:.75rem;border-top:1px solid var(--border)">
            Report ID: ${d.reportId} Â· ${d.timestamp}
          </div>
        `;
      } catch(e) {
        body.innerHTML = `<div style="color:var(--red)">Failed to load report</div>`;
      }
    }

    function copyEndpoint(id) {
      navigator.clipboard.writeText(`${location.origin}/report/${id}`);
      alert('Endpoint copied! Send $0.01 USDC via x402 to unlock.');
    }

    function closeModal(e) {
      if (!e || e.target === document.getElementById('modal')) {
        document.getElementById('modal').classList.remove('open');
      }
    }

    function shortHash(h) { return h ? h.slice(0,10)+'â€¦' : 'â€”'; }

    // â”€â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function restartCountdown() {
      const el = document.getElementById('strip-countdown');
      el.style.animation = 'none';
      void el.offsetHeight; // trigger reflow
      el.style.animation = `spin ${POLL_INTERVAL / 1000}s linear infinite`;
    }

    async function pollStatus() {
      await Promise.all([loadServices(), loadReports()]);
      restartCountdown();
    }

    async function init() {
      await pollStatus();
      setInterval(pollStatus, POLL_INTERVAL);
    }

    document.getElementById('hunt-topic').addEventListener('keydown', e => {
      if (e.key === 'Enter') runHunt();
    });

    init();
  </script>
</body>
</html>
